<!DOCTYPE html>
<html lang="pt-br">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Login</title>
   <link rel="stylesheet" href="log-in.css">

   <!-- Firebase via CDN -->
   <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
  import { 
    getAuth, 
    signInWithEmailAndPassword, 
    GoogleAuthProvider, 
    signInWithPopup, 
    sendPasswordResetEmail 
  } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCYDGROxguHYX-YA-J-HqRRGSF3uN-ZEAs",
    authDomain: "fenix-construtora-a34b5.firebaseapp.com",
    projectId: "fenix-construtora-a34b5",
    storageBucket: "fenix-construtora-a34b5.firebasestorage.app",
    messagingSenderId: "928009241790",
    appId: "1:928009241790:web:333b16b217a2ece01d8aef"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const provider = new GoogleAuthProvider();

  // login normal
  window.loginUser = function(event) {
    event.preventDefault();
    const email = document.getElementById("email").value;
    const senha = document.getElementById("password").value;

    signInWithEmailAndPassword(auth, email, senha)
      .then(() => {
        alert("Login realizado com sucesso! Bem-vindo.");
        window.location.href = "index.html";
      })
      .catch((error) => {
        alert(`Erro ao entrar: ${error.message}`);
      });
  }

  // login Google
  window.loginGoogle = function() {
    signInWithPopup(auth, provider)
      .then((result) => {
        const user = result.user;
        alert(`Bem-vindo, ${user.displayName}!`);
        window.location.href = "index.html";
      })
      .catch((error) => {
        alert(`Erro ao entrar com Google: ${error.message}`);
      });
  }

  // esqueceu a senha
  window.resetPassword = function() {
    const email = document.getElementById("email").value;

    if (!email) {
      alert("Digite seu e-mail no campo acima para recuperar a senha.");
      return;
    }

    sendPasswordResetEmail(auth, email)
      .then(() => {
        alert("E-mail de redefinição enviado! Verifique sua caixa de entrada.");
      })
      .catch((error) => {
        alert(`Erro ao enviar redefinição: ${error.message}`);
      });
  }
</script>

</head>
<body>
<header>
 <div class="navbar">
   <div class="logo">
     <img src="img/image 39.svg" alt="" />
   </div>
   <div class="abas">
          <a href="./index.html"><p>Inicio</p></a>
          <a href="./sobre.html"><p>Sobre Nós</p></a>
          <a href=""><p>Imóveis</p></a>
          <a href="./serviços.html"><p>Serviços</p></a>
          <a href="./contato.html"><p>Contato</p></a>
   </div>
   <div class="barrinha"><hr></div>
   <div class="login">
     <div class="sing"><button id="but1" type="button"><p>Login</p></button></div>
     <div class="log"><button id="but2"><p>Sign-in</p></button></div>
   </div>
 </div>
</header>

<main>
  <div class="titulos1">
    <h3><b>FALE AGORA</b> COM UM CONSULTOR FÊNIX</h3>
    <h1>LOG-IN</h1>
    <img src="img/icon-usuario.png" alt="icon-usuario">
  </div>

  <form onsubmit="loginUser(event)">
    <label for="email">Digite o seu E-mail</label>
    <input type="email" placeholder="E-mail" id="email" required>

    <label for="password">Digite sua senha</label>
    <input type="password" placeholder="Senha" id="password" required>

    <!-- Link para reset de senha -->
    <p class="esqueceuasenha">
      Esqueceu a senha? <span><a href="#" onclick="resetPassword()">Clique aqui</a></span>
    </p>

    <div class="barras">
      <div class="barra"></div>
      <p>ou, entre com</p>
      <div class="barra"></div>
    </div>

    <div class="opcoes-login">
        <img src="img/logo-google.png" alt="logo-google" onclick="loginGoogle()" style="cursor:pointer;">  
        <img src="img/logo-facebook.png" alt="logo.facebook">  
        <img src="img/logo-apple.png" alt="logo.apple">  
    </div>

    <button type="submit" class="btn-entrar">Entrar</button>
    <p>É um cliente Fênix e não possui uma conta?</p>
    <a class="registrar" href="sign-in.html">Registre-se</a>
  </form>
</main>

<footer>
  <div class="rodape">
    <div class="foot-logo">
      <img src="img/image 39.svg" alt="Logo" class="logo" />
      <div class="titulos">
        <div class="titulo"><p>FÊNIX</p></div>
        <div class="subtitle"><p>CONSTRUTORA</p></div>
      </div>
    </div>
    <div class="contatos">
      <div class="cont1">
        <div class="cont-title1"><h3>REDES SOCIAIS</h3></div>
        <div class="conte">
          <div class="icon"><img src="img/insta.png" alt=""></div>
          <div class="rede"><p>INSTAGRAM</p></div>      
        </div>
      </div>
      <div class="cont2">
        <div class="titulo2"><h3>NOSSA EMPRESA</h3></div>
        <div class="abins">
          <p>SOBRE NÓS</p>
          <p>CONTATO</p>
          <p>SERVIÇOS</p>
        </div>
      </div>
      <div class="cont3">
        <div class="titulo3"><h3>NOSSOS PRODUTOS</h3></div>
        <div class="produts">
          <p>PROJETOS</p>
          <p>IMÓVEIS</p>
        </div>
      </div>
    </div>
    <div class="direitos-reservados" style="color: white;">
      <p>&copy; 2025 Fênix Construtora. Todos os direitos reservados.</p>
    </div>
  </div>
</footer>
</body>
</html>
